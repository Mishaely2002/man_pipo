<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Mwansele Assistant</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f7f9fc;
      margin: 0;
      padding: 0;
      color: #333;
    }

    header {
      background: #004080;
      color: white;
      padding: 20px;
      text-align: center;
    }

    main {
      max-width: 800px;
      margin: auto;
      padding: 20px;
    }

    #chat-container {
      background: white;
      border: 1px solid #ccc;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      display: flex;
      flex-direction: column;
      height: 400px;
      overflow: hidden;
    }

    #chat-box {
      flex: 1;
      overflow-y: auto;
      padding: 15px;
    }

    .message {
      margin: 10px 0;
      padding: 10px;
      border-radius: 8px;
      max-width: 70%;
      transition: all 0.3s ease-in-out;
      opacity: 0;
      transform: translateY(10px);
    }

    .message.show {
      opacity: 1;
      transform: translateY(0);
    }

    .user {
      background-color: #cce5ff;
      align-self: flex-end;
      text-align: right;
    }

    .assistant {
      background-color: #e2e3e5;
      align-self: flex-start;
      text-align: left;
    }

    #chat-input-area {
      display: flex;
      padding: 10px;
      border-top: 1px solid #ccc;
      gap: 10px;
    }

    #chat-input {
      flex: 1;
      padding: 10px;
      font-size: 16px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }

    button {
      padding: 10px 20px;
      font-size: 16px;
      background: #004080;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }

    footer {
      text-align: center;
      padding: 20px;
      background: #f0f2f5;
      font-size: 14px;
      color: #666;
    }
  </style>
</head>

<body>


  <header>
    <link rel="stylesheet" href="color.css">

    <h1>ðŸŽ“ Mwansele High School Assistant</h1>
    <p>Your digital companion for school life, events, and motivation.</p>
  </header>

  
  <main>
    
  <div id="assistantGreeting" class="greeting-banner"></div>
    
    <div id="chat-container">
      
      <div id="chat-box"></div>
      
      <div id="chat-input-area">
        <input type="text" id="chat-input" placeholder="Ask something..." />
        <button onclick="sendMessage()">Send</button>
      </div>
    </div>
  </main>

  <footer>
    <p>Â© 2025 Mwansele High School. Empowering students with knowledge, character, and community spirit.</p>
  </footer>

<script>
  const schoolInfo = {
    motto: "Discipline and Excellence.",
    vision: "To empower students through holistic education.",
    location: "Mwansele High School, Mbeya Region, Tanzania.",
    values: ["Integrity", "Community Service", "Academic Excellence"],
    clubs: ["Science Club", "Debate Team", "Drama Society", "ICT Club", "Sports Club"]
  };

  const motivationalQuotes = [
    "Push yourself, because no one else is going to do it for you.",
    "Success doesnâ€™t just find you. You have to go out and get it.",
    "Great things never come from comfort zones.",
    "Let your light shine before others, that they may see your good deeds.",
    "Discipline is the bridge between goals and accomplishment."
  ];

  const schoolEvents = [
    { title: "Science Fair", date: "Sept 5", description: "Student innovations on display." },
    { title: "Community Service Day", date: "Sept 12", description: "Outreach projects across Mbeya Region." },
    { title: "Midterm Exams", date: "Sept 18â€“22", description: "Full schedule available in admin panel." },
    { title: "Cultural Day", date: "Sept 25", description: "Student-led celebration of diversity and talent." }
  ];

  const offTopicTriggers = [
    "weather", "football", "politics", "movies", "celebrities",
    "math help", "translate", "jokes", "music", "games", "sports"
  ];

  let lastTopic = "";

  function sendMessage() {
    const input = document.getElementById("chat-input");
    const message = input.value.trim();
    if (!message) return;

    appendMessage(message, "user");
    input.value = "";

    const reply = routeMessage(message);
    setTimeout(() => {
      appendMessage(reply, "assistant");
    }, 500);
  }

  function appendMessage(text, sender) {
    const box = document.getElementById("chat-box");
    const msg = document.createElement("div");
    msg.className = `message ${sender}`;
    msg.innerText = text;
    box.appendChild(msg);
    setTimeout(() => msg.classList.add("show"), 10);
    box.scrollTop = box.scrollHeight;
  }

  function routeMessage(msg) {
    const lower = msg.toLowerCase();

    // Off-topic detection
    if (offTopicTriggers.some(word => lower.includes(word))) {
      return "Sorry, I focus on Mwansele High School. Would you like to ask about our clubs, events, or school life?";
    }

    // School Overview First
    if (
      [
        "what is mwansele",
        "about mwansele school",
        "tell me about mwansele",
        "describe mwansele",
        "what kind of school is mwansele",
        "mwansele overview",
        "mwansele background",
        "mwansele school info",
        "what does mwansele do",
        "what is this school about",
        "what's mwansele high school"
      ].some(phrase => lower.includes(phrase))
    ) {
      lastTopic = "school_about";
      return "Mwansele High School is a respected institution in Mbeya Region, Tanzania. Founded in 1998, we are known for our commitment to discipline, academic excellence, and community service. Our students engage in STEM, arts, debate, sports, and outreach programs.";
    }

    // Greetings
    if (
      ["hello", "hi", "hey", "mambo", "salama", "yo", "good morning", "good afternoon", "greetings"]
        .some(t => lower.includes(t))
    ) {
      const responses = [
        "Hey there! ðŸ‘‹ Ready to explore Mwanseleâ€™s world?",
        "Karibu sana! How can I assist you today?",
        "Mambo vipi? Letâ€™s dive into school life together.",
        "Good to see you! Want to hear about our clubs or events?",
        "Salama! Iâ€™m your Mwansele Assistantâ€”ask me anything.",
        "ðŸŒž Good morning! Letâ€™s make today count.",
        "ðŸŒ‡ Good afternoon! Need a motivational boost or school update?",
        "Welcome back, scholar of Mwansele! Whatâ€™s on your mind?",
        "ðŸ‘‹ Hello again! Want to check out upcoming events or get inspired?",
        "Shikamoo! Iâ€™m here to serve with knowledge and kindness."
      ];
      return responses[Math.floor(Math.random() * responses.length)];
    }

    // Clubs
    if (lower.includes("clubs")) {
      lastTopic = "clubs";
      return `We offer: ${schoolInfo.clubs.join(", ")}. Which one would you join?`;
    }

    // Events
    if (lower.includes("event") || lower.includes("schedule")) {
      lastTopic = "events";
      return schoolEvents.map(e => `ðŸ“… ${e.title} on ${e.date}: ${e.description}`).join("\n\n");
    }

    // Quotes
    if (lower.includes("quote") || lower.includes("motivate") || lower.includes("spiritual")) {
      lastTopic = "motivation";
      return motivationalQuotes[Math.floor(Math.random() * motivationalQuotes.length)];
    }

    // Follow-ups
    if (["tell me more", "go on", "what else"].some(p => lower.includes(p))) {
      if (lastTopic === "school_about") {
        return "We were founded in 1998 and have grown into one of Mbeyaâ€™s top-performing schools. Our motto is 'Discipline and Excellence,' and we believe in nurturing future leaders through integrity and innovation.";
      }
      if (lastTopic === "clubs") {
        return "Science Club meets Tuesdays, Debate Team trains Fridays. ICT Club builds real projects with mentorship.";
      }
      if (lastTopic === "events") {
        return "You can also check out our Cultural Day on Sept 25th. Itâ€™s a student-led celebration of diversity and talent.";
      }
      if (lastTopic === "motivation") {
        return "Hereâ€™s another: 'Success is not final, failure is not fatal: It is the courage to continue that counts.'";
      }
    }

    // Final fallback
    return "Sorry, would you ask me anything concerning Mwansele High School? Iâ€™m here to help with school life, events, clubs, and more.";
  }
</script>

</script>
<script src="greeting_logic.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    injectGreeting(); // Injects the greeting into the banner
  });
</script>

</body>
</html>
